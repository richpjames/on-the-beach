<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OCR Eval — 2026-02-24</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0e0e0e;
    --surface: #171717;
    --surface2: #1e1e1e;
    --border: #2a2a2a;
    --text: #e8e4de;
    --text-dim: #8a847a;
    --amber: #e8a44a;
    --amber-dim: rgba(232,164,74,0.15);
    --green: #5cb87a;
    --green-dim: rgba(92,184,122,0.12);
    --red: #d15a5a;
    --red-dim: rgba(209,90,90,0.12);
    --yellow: #c9a84c;
    --yellow-dim: rgba(201,168,76,0.12);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    line-height: 1.5;
    min-height: 100vh;
  }

  .noise {
    position: fixed; inset: 0; z-index: 0; pointer-events: none; opacity: 0.03;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    background-size: 256px 256px;
  }

  .container {
    position: relative; z-index: 1;
    max-width: 1400px;
    margin: 0 auto;
    padding: 48px 32px 80px;
  }

  header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 48px;
  }

  header .label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--amber);
    margin-bottom: 8px;
  }

  header h1 {
    font-family: 'Playfair Display', serif;
    font-weight: 900;
    font-size: 36px;
    letter-spacing: -0.02em;
    color: var(--text);
    margin-bottom: 6px;
  }

  header .meta {
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    color: var(--text-dim);
  }

  /* ─── Save Button ─── */
  .save-btn {
    all: unset;
    cursor: pointer;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.05em;
    padding: 10px 18px;
    border-radius: 8px;
    background: var(--surface2);
    border: 1px solid var(--border);
    color: var(--text-dim);
    transition: all 0.2s;
    white-space: nowrap;
    flex-shrink: 0;
    margin-left: 24px;
    margin-top: 6px;
  }

  .save-btn:hover { border-color: var(--amber); color: var(--amber); background: var(--amber-dim); }
  .save-btn.has-changes { border-color: var(--amber); color: var(--amber); background: var(--amber-dim); }

  /* ─── Summary Cards ─── */
  .summary-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    margin-bottom: 48px;
  }

  .model-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    position: relative;
    overflow: hidden;
    animation: fadeUp 0.5s ease both;
  }

  .model-card-accent {
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
  }

  .model-card .model-name {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 16px;
  }

  .overall-score {
    font-family: 'Playfair Display', serif;
    font-size: 48px;
    font-weight: 900;
    letter-spacing: -0.03em;
    margin-bottom: 16px;
  }

  .overall-label {
    font-size: 12px;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 4px;
  }

  .stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 0;
    border-top: 1px solid var(--border);
    font-size: 13px;
  }

  .stat-row .stat-label {
    color: var(--text-dim);
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
  }

  .stat-row .stat-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    font-weight: 600;
  }

  .bar-track {
    width: 80px;
    height: 4px;
    background: var(--surface2);
    border-radius: 2px;
    margin: 0 12px;
    flex-shrink: 0;
    overflow: hidden;
  }

  .bar-fill {
    height: 100%;
    border-radius: 2px;
    transition: width 0.4s ease;
  }

  /* ─── Section Headers ─── */
  .section-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--text-dim);
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border);
  }

  /* ─── Detail Table ─── */
  .table-wrap {
    overflow-x: auto;
    border: 1px solid var(--border);
    border-radius: 12px;
    background: var(--surface);
    animation: fadeUp 0.5s ease 0.25s both;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
  }

  thead th {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--text-dim);
    padding: 14px 12px;
    text-align: left;
    background: var(--surface2);
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    z-index: 2;
    white-space: nowrap;
  }

  thead th.group-header {
    text-align: center;
    border-left: 1px solid var(--border);
    padding: 8px 12px;
  }

  thead th:first-child { border-radius: 11px 0 0 0; }
  thead th:last-child { border-radius: 0 11px 0 0; }

  tbody td {
    padding: 10px 12px;
    border-bottom: 1px solid var(--border);
    vertical-align: top;
  }

  tbody tr:last-child td { border-bottom: none; }
  tbody tr:hover { background: rgba(232,164,74,0.03); }

  .col-id {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-dim);
    max-width: 160px;
    word-break: break-all;
  }

  .col-expected { color: var(--text); font-weight: 500; }
  .col-expected .artist { color: var(--text); }
  .col-expected .title { color: var(--text-dim); font-style: italic; }

  .model-col {
    border-left: 1px solid var(--border);
    min-width: 200px;
  }

  .model-result { display: flex; flex-direction: column; gap: 2px; }

  .model-result .artist,
  .model-result .title {
    display: flex;
    align-items: baseline;
    gap: 6px;
  }

  .model-result .field-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-dim);
    flex-shrink: 0;
    width: 10px;
  }

  .model-result .field-value { font-size: 12px; line-height: 1.4; }

  .model-result .field-value.null-val {
    color: var(--red);
    opacity: 0.5;
    font-style: italic;
  }

  .score-pills { display: flex; gap: 4px; margin-top: 4px; flex-wrap: wrap; }

  .pill {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 4px;
    line-height: 1.4;
  }

  .pill.exact { letter-spacing: 0; }
  .pill.s-perfect { background: var(--green-dim); color: var(--green); }
  .pill.s-good    { background: var(--yellow-dim); color: var(--yellow); }
  .pill.s-poor    { background: var(--red-dim); color: var(--red); }
  .pill.s-zero    { background: rgba(255,255,255,0.04); color: var(--text-dim); opacity: 0.5; }

  /* ─── Mark Correct ─── */
  .mark-wrap { margin-top: 6px; min-height: 22px; }

  .mark-btn {
    all: unset;
    cursor: pointer;
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    padding: 2px 8px;
    border-radius: 4px;
    border: 1px solid var(--border);
    color: var(--text-dim);
    transition: all 0.15s;
    display: inline-flex;
    align-items: center;
    gap: 4px;
  }

  .mark-btn:hover { border-color: var(--green); color: var(--green); }

  .mark-btn.corrected {
    background: var(--green-dim);
    border-color: var(--green);
    color: var(--green);
  }

  .undo-hint {
    color: var(--text-dim);
    margin-left: 2px;
    font-size: 9px;
    opacity: 0.7;
  }

  /* Winner badge */
  .winner-badge {
    display: inline-block;
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 4px;
    background: var(--green-dim);
    color: var(--green);
    margin-left: 8px;
    vertical-align: middle;
  }

  /* Legend */
  .legend { display: flex; gap: 20px; margin-top: 16px; margin-bottom: 24px; flex-wrap: wrap; }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-dim);
  }

  .legend-swatch { width: 12px; height: 12px; border-radius: 3px; }
  .legend-swatch.perfect { background: var(--green-dim); border: 1px solid var(--green); }
  .legend-swatch.good    { background: var(--yellow-dim); border: 1px solid var(--yellow); }
  .legend-swatch.poor    { background: var(--red-dim); border: 1px solid var(--red); }
  .legend-swatch.zero    { background: rgba(255,255,255,0.04); border: 1px solid var(--text-dim); opacity: 0.5; }

  @media (max-width: 900px) {
    .summary-grid { grid-template-columns: 1fr; }
    .container { padding: 24px 16px 48px; }
    header h1 { font-size: 28px; }
    header { flex-direction: column; gap: 16px; }
    .save-btn { margin-left: 0; }
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
</head>
<body>
<div class="noise"></div>
<div class="container">

<header>
  <div>
    <div class="label">Vinyl OCR Model Evaluation</div>
    <h1>Mistral Model Comparison</h1>
    <div class="meta">2026-02-24T20:12:32Z &middot; 65 test cases &middot; artist + title extraction</div>
  </div>
  <button class="save-btn" id="save-btn" onclick="saveJson()">Save JSON</button>
</header>

<div class="section-title">Overall Scores</div>
<div class="summary-grid" id="summary"></div>

<div class="section-title">Per-Case Results</div>
<div class="legend">
  <div class="legend-item"><div class="legend-swatch perfect"></div> Exact / &ge;0.8 fuzzy</div>
  <div class="legend-item"><div class="legend-swatch good"></div> &ge;0.5 fuzzy</div>
  <div class="legend-item"><div class="legend-swatch poor"></div> &gt;0 fuzzy</div>
  <div class="legend-item"><div class="legend-swatch zero"></div> 0 / null</div>
</div>
<div class="table-wrap">
  <table id="detail-table"></table>
</div>

</div>

<script>
var PALETTE = ["#e8a44a","#5aafcf","#c77dba","#7bc67e","#f06292","#4db6ac"];
var DATA = {"timestamp":"2026-02-24T20:12:32.334Z","models":["mistral-ocr-latest","mistral-small-2506","mistral-medium-2508"],"caseCount":65,"results":{"mistral-small-2506":{"summary":{"artistExact":0.2,"titleExact":0.18461538461538463,"artistFuzzy":0.2552496065188373,"titleFuzzy":0.22928677657184446,"overall":0.21728794192651663},"details":[{"id":"the-earons-land-of-hunger","expected":{"artist":"The Earons","title":"Land Of Hunger"},"actual":{"artist":"The Earons","title":"Land of Hunger"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"louis-chedid-ainsi-soit-il","expected":{"artist":"Louis Chedid","title":"Ainsi Soit-Il"},"actual":{"artist":"Louis Chedid","title":"Ainsi soit-il"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"ed-lincoln-ontem-hoje-sempre","expected":{"artist":"Ed Lincoln","title":"Ontem Hoje Sempre"},"actual":{"artist":"Ed Lincoln","title":"Ontem Hoje Sempre"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"caetano-veloso-caetano-veloso","expected":{"artist":"Caetano Veloso","title":"Caetano Veloso"},"actual":{"artist":"Caetano Veloso","title":"Caetano Veloso"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"pipos-4-o-encontro-da-massa","expected":{"artist":"Pipo's 4","title":"O Encontro da Massa"},"actual":{"artist":"Pipo's 4","title":"O Encontro da Massa"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"quarteto-em-cy-tamba-trio-som-definitivo","expected":{"artist":"Quarteto Em Cy & Tamba Trio","title":"Som Definitivo"},"actual":{"artist":"Quarteto em Cy","title":"Som Definitivo"},"scores":{"artistExact":0,"titleExact":1,"artistFuzzy":0.5185185185185186,"titleFuzzy":1}},{"id":"esperanza-spalding-emilys-devolution","expected":{"artist":"Esperanza Spalding","title":"Emily's D+Evolution"},"actual":{"artist":"Emley + Evolution","title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.2222222222222222,"titleFuzzy":0}},{"id":"machito-tanga","expected":{"artist":"Machito & His Afro-Cubans","title":"Tanga"},"actual":{"artist":"Machito","title":"Afro-Cuban Tango"},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.28,"titleFuzzy":0.25}},{"id":"orquesta-el-macabeo-salsa-bestial","expected":{"artist":"Orquesta El Macabeo","title":"Salsa Bestial"},"actual":{"artist":"Orquesta El Macabeo","title":"Salsa Bestial"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"t-rex-t-rex","expected":{"artist":"T. Rex","title":"T. Rex"},"actual":{"artist":"T. Rex","title":null},"scores":{"artistExact":1,"titleExact":0,"artistFuzzy":1,"titleFuzzy":0}},{"id":"various-rico-rico","expected":{"artist":"Various","title":"Rico Rico - 50 Exitos Tropicales"},"actual":{"artist":"Varios Artistas","title":"El Rico Rico: 50 Exitos Tropicales"},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.4,"titleFuzzy":0.8529411764705882}},{"id":"various-seattle-the-dark-side","expected":{"artist":"Various","title":"Seattle... The Dark Side"},"actual":{"artist":"Rhyme Cartel Records","title":"Seattle... The Dark Side"},"scores":{"artistExact":0,"titleExact":1,"artistFuzzy":0.19999999999999996,"titleFuzzy":1}},{"id":"determine-never-know","expected":{"artist":"Determine","title":"Never Know"},"actual":{"artist":"Never Know","title":"Determinate"},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.4,"titleFuzzy":0.36363636363636365}},{"id":"discotex-records-6am-wanna-be-down","expected":{"artist":"Discotex Records","title":"6AM / Wanna Be Down"},"actual":{"artist":"Various Artists","title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.1875,"titleFuzzy":0}},{"id":"legends-of-the-dark-ground-cabra","expected":{"artist":"Legends of the Dark Ground","title":"Cabra (Seiji Re-Rinse)"},"actual":{"artist":"Capira","title":"Self Re-Rinse!"},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.07692307692307687,"titleFuzzy":0.5}},{"id":"wedding-hands-in-the-till","expected":{"artist":"Wedding","title":"Hands In The Till / A Little Love"},"actual":{"artist":null,"title":"Wedding"},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0.09090909090909094}},{"id":"olu-living-free","expected":{"artist":"Olu","title":"Living Free"},"actual":{"artist":"OLU","title":"Living Free"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"big-bub-i-dont-mind","expected":{"artist":"Big Bub","title":"I Don't Mind"},"actual":{"artist":"Big Bub","title":null},"scores":{"artistExact":1,"titleExact":0,"artistFuzzy":1,"titleFuzzy":0}},{"id":"patrick-cowley-menergy","expected":{"artist":"Patrick Cowley","title":"Menergy"},"actual":{"artist":"Patrick Cowley","title":"Menergy"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"sleepy-brown-i-cant-wait","expected":{"artist":"Sleepy Brown feat. Outkast","title":"I Can't Wait"},"actual":{"artist":"Sleepy Brown featuring Outkast","title":"I Can't Wait"},"scores":{"artistExact":0,"titleExact":1,"artistFuzzy":0.8333333333333334,"titleFuzzy":1}},{"id":"mc-mell-o-first-chronicles","expected":{"artist":"MC Mell 'O'","title":"The First Chronicles of D.E.T.T."},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"natural-black-early-on-before","expected":{"artist":"Natural Black","title":"Early On Before"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"young-peoples-records-all-aboard","expected":{"artist":"Young People's Records","title":"All Aboard!"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"mario-telles-mario-telles","expected":{"artist":"Mario Telles","title":"Mario Telles"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"lecuona-plays-for-two","expected":{"artist":"Lecuona","title":"Plays For Two"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"aeoliah-crystal-illumination","expected":{"artist":"Aeoliah","title":"Crystal Illumination"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"coro-minero-de-turon","expected":{"artist":"Coro Minero de Turón","title":"Coro Minero de Turón"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"maggie-carles-luis-nodal-y-los-magneticos","expected":{"artist":"Maggie Carlés / Luis Nodal y los Magnéticos","title":"Maggie Carlés / Luis Nodal y los Magnéticos"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"lucho-gatica-antonio-machin","expected":{"artist":"Lucho Gatica / Antonio Machin","title":"Lucho Gatica / Antonio Machin"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"cesaria-evora-cabo-verde","expected":{"artist":"Cesaria Evora","title":"Cabo Verde"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"melanie-golden-hour-of-melanie","expected":{"artist":"Melanie","title":"Golden Hour Of Melanie"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"neil-young-after-the-gold-rush","expected":{"artist":"Neil Young","title":"After The Gold Rush"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"steve-reich-sextet-six-marimbas","expected":{"artist":"Steve Reich","title":"Sextet / Six Marimbas"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"gregory-isaacs-lovers-rock","expected":{"artist":"Gregory Isaacs","title":"Lovers' Rock"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"curtis-mayfield-curtis-live","expected":{"artist":"Curtis Mayfield","title":"Curtis/Live!"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"j-dilla-donuts","expected":{"artist":"J Dilla","title":"Donuts"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"hugo-jara-estado-de-animo","expected":{"artist":"Hugo Jara","title":"Estado De Animo"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"dorival-caymmi-caymmi","expected":{"artist":"Dorival Caymmi","title":"Caymmi"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"dorival-caymmi-caymmi-odeon","expected":{"artist":"Dorival Caymmi","title":"Caymmi"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"stevie-wonder-hotter-than-july","expected":{"artist":"Stevie Wonder","title":"Hotter Than July"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"nite-jewel-no-sun","expected":{"artist":"Nite Jewel","title":"No Sun"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"horace-silver-and-the-jazz-messengers","expected":{"artist":"Horace Silver and the Jazz Messengers","title":"Horace Silver and the Jazz Messengers"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"max-romeo-revelation-time","expected":{"artist":"Max Romeo","title":"Revelation Time"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"various-beat-girls-espanol","expected":{"artist":"Various","title":"Beat Girls Español!"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"team-shadetek-pale-fire","expected":{"artist":"Team Shadetek","title":"Pale Fire"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"astrud-gilberto-compact-jazz","expected":{"artist":"Astrud Gilberto","title":"Compact Jazz"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"astrud-gilberto-beach-samba","expected":{"artist":"Astrud Gilberto","title":"Beach Samba"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"various-campeones-xvii-concurso-cancion-asturiana","expected":{"artist":"Various","title":"Campeones XVII Concurso de Canción Asturiana"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"paddy-mcaloon-i-trawl-the-megahertz","expected":{"artist":"Paddy McAloon","title":"I Trawl the Megahertz"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"maranata-maranata","expected":{"artist":"Maranata","title":"Maranata"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"antonio-carlos-jobim-tide","expected":{"artist":"Antonio Carlos Jobim","title":"Tide"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"refused-songs-to-fan-the-flames-of-discontent","expected":{"artist":"Refused","title":"Songs to Fan the Flames of Discontent"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"collard-roge-satie-4-handed-piano","expected":{"artist":"Jean-Philippe Collard & Pascal Rogé","title":"Satie: The 4 Handed Piano"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"oren-ambarchi-shebang","expected":{"artist":"Oren Ambarchi","title":"Shebang"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"laurent-garnier-planet-house-ep","expected":{"artist":"Laurent Garnier","title":"Planet House EP"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"various-trojan-reggae-party-volume-one","expected":{"artist":"Various","title":"Trojan Reggae Party Volume One"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"violeta-parra-un-rio-de-sangre","expected":{"artist":"Violeta Parra","title":"Un Rio de Sangre"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"bob-marley-and-the-wailers-uprising","expected":{"artist":"Bob Marley & The Wailers","title":"Uprising"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"various-macondo-revisitado","expected":{"artist":"Various","title":"Macondo Revisitado"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"barry-brown-vibes-of-barry-brown","expected":{"artist":"Barry Brown","title":"Vibes of Barry Brown"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"barry-brown-barry-brown","expected":{"artist":"Barry Brown","title":"Barry Brown"},"actual":{"artist":"BABYMETAL","title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.2727272727272727,"titleFuzzy":0}},{"id":"los-llopis-los-llopis","expected":{"artist":"Los Llopis","title":"Los Llopis"},"actual":{"artist":"Los Llopis","title":null},"scores":{"artistExact":1,"titleExact":0,"artistFuzzy":1,"titleFuzzy":0}},{"id":"jorge-negrete-jorge-negrete","expected":{"artist":"Jorge Negrete","title":"Jorge Negrete"},"actual":{"artist":"Varios Artistas","title":"Voge Negrete"},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.19999999999999996,"titleFuzzy":0.8461538461538461}},{"id":"baden-powell-estudos","expected":{"artist":"Baden Powell","title":"Estudos"},"actual":{"artist":"Baden Powell","title":"Estudos"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"tipico-santa-rosa-tipico-santa-rosa","expected":{"artist":"Tipico Santa Rosa","title":"Tipico Santa Rosa"},"actual":{"artist":"Tipico Santa Rosa","title":null},"scores":{"artistExact":1,"titleExact":0,"artistFuzzy":1,"titleFuzzy":0}}]},"mistral-medium-2508":{"summary":{"artistExact":0.16923076923076924,"titleExact":0.16923076923076924,"artistFuzzy":0.21207756900469452,"titleFuzzy":0.21054968423389478,"overall":0.19027219792503194},"details":[{"id":"the-earons-land-of-hunger","expected":{"artist":"The Earons","title":"Land Of Hunger"},"actual":{"artist":"The Earons","title":"Land Of Hunger"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"louis-chedid-ainsi-soit-il","expected":{"artist":"Louis Chedid","title":"Ainsi Soit-Il"},"actual":{"artist":"Louis Chedid","title":"Ainsi soit-il"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"ed-lincoln-ontem-hoje-sempre","expected":{"artist":"Ed Lincoln","title":"Ontem Hoje Sempre"},"actual":{"artist":"Ed Lincoln","title":"Ontem Hoje Sempre"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"caetano-veloso-caetano-veloso","expected":{"artist":"Caetano Veloso","title":"Caetano Veloso"},"actual":{"artist":"Caetano Veloso","title":null},"scores":{"artistExact":1,"titleExact":0,"artistFuzzy":1,"titleFuzzy":0}},{"id":"pipos-4-o-encontro-da-massa","expected":{"artist":"Pipo's 4","title":"O Encontro da Massa"},"actual":{"artist":"Pipo's 4","title":"O Encontro da Massa"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"quarteto-em-cy-tamba-trio-som-definitivo","expected":{"artist":"Quarteto Em Cy & Tamba Trio","title":"Som Definitivo"},"actual":{"artist":"Tamba Trio","title":"Quarteto em Cy"},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.37037037037037035,"titleFuzzy":0.0714285714285714}},{"id":"esperanza-spalding-emilys-devolution","expected":{"artist":"Esperanza Spalding","title":"Emily's D+Evolution"},"actual":{"artist":"Emily","title":"D+Evolution"},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.11111111111111116,"titleFuzzy":0.5789473684210527}},{"id":"machito-tanga","expected":{"artist":"Machito & His Afro-Cubans","title":"Tanga"},"actual":{"artist":"Machito","title":"Afro-Cubanas Tanga"},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.28,"titleFuzzy":0.2777777777777778}},{"id":"orquesta-el-macabeo-salsa-bestial","expected":{"artist":"Orquesta El Macabeo","title":"Salsa Bestial"},"actual":{"artist":"NYC Salsa","title":"2"},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.21052631578947367,"titleFuzzy":0}},{"id":"t-rex-t-rex","expected":{"artist":"T. Rex","title":"T. Rex"},"actual":{"artist":"T-Rex","title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.6666666666666667,"titleFuzzy":0}},{"id":"various-rico-rico","expected":{"artist":"Various","title":"Rico Rico - 50 Exitos Tropicales"},"actual":{"artist":"Rico Rico","title":"50 Exitos Tropicales"},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.11111111111111116,"titleFuzzy":0.625}},{"id":"various-seattle-the-dark-side","expected":{"artist":"Various","title":"Seattle... The Dark Side"},"actual":{"artist":"Seattle","title":"The Dark Side"},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0.5416666666666667}},{"id":"determine-never-know","expected":{"artist":"Determine","title":"Never Know"},"actual":{"artist":"Priscilla Ahn","title":"Never Know"},"scores":{"artistExact":0,"titleExact":1,"artistFuzzy":0,"titleFuzzy":1}},{"id":"discotex-records-6am-wanna-be-down","expected":{"artist":"Discotex Records","title":"6AM / Wanna Be Down"},"actual":{"artist":"Skallamooch","title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.125,"titleFuzzy":0}},{"id":"legends-of-the-dark-ground-cabra","expected":{"artist":"Legends of the Dark Ground","title":"Cabra (Seiji Re-Rinse)"},"actual":{"artist":"Capira","title":"Selji Re-Rinse"},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0.07692307692307687,"titleFuzzy":0.5909090909090908}},{"id":"wedding-hands-in-the-till","expected":{"artist":"Wedding","title":"Hands In The Till / A Little Love"},"actual":{"artist":null,"title":"Hands in the Till / A Little Love"},"scores":{"artistExact":0,"titleExact":1,"artistFuzzy":0,"titleFuzzy":1}},{"id":"olu-living-free","expected":{"artist":"Olu","title":"Living Free"},"actual":{"artist":"OLU","title":"Living Free"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"big-bub-i-dont-mind","expected":{"artist":"Big Bub","title":"I Don't Mind"},"actual":{"artist":"Big Bub","title":"I Don't Mind"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"patrick-cowley-menergy","expected":{"artist":"Patrick Cowley","title":"Menergy"},"actual":{"artist":"Patrick Cowley","title":"Menergy"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"sleepy-brown-i-cant-wait","expected":{"artist":"Sleepy Brown feat. Outkast","title":"I Can't Wait"},"actual":{"artist":"Sleepy Brown featuring Outkast","title":"I Can't Wait"},"scores":{"artistExact":0,"titleExact":1,"artistFuzzy":0.8333333333333334,"titleFuzzy":1}},{"id":"mc-mell-o-first-chronicles","expected":{"artist":"MC Mell 'O'","title":"The First Chronicles of D.E.T.T."},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"natural-black-early-on-before","expected":{"artist":"Natural Black","title":"Early On Before"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"young-peoples-records-all-aboard","expected":{"artist":"Young People's Records","title":"All Aboard!"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"mario-telles-mario-telles","expected":{"artist":"Mario Telles","title":"Mario Telles"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"lecuona-plays-for-two","expected":{"artist":"Lecuona","title":"Plays For Two"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"aeoliah-crystal-illumination","expected":{"artist":"Aeoliah","title":"Crystal Illumination"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"coro-minero-de-turon","expected":{"artist":"Coro Minero de Turón","title":"Coro Minero de Turón"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"maggie-carles-luis-nodal-y-los-magneticos","expected":{"artist":"Maggie Carlés / Luis Nodal y los Magnéticos","title":"Maggie Carlés / Luis Nodal y los Magnéticos"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"lucho-gatica-antonio-machin","expected":{"artist":"Lucho Gatica / Antonio Machin","title":"Lucho Gatica / Antonio Machin"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"cesaria-evora-cabo-verde","expected":{"artist":"Cesaria Evora","title":"Cabo Verde"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"melanie-golden-hour-of-melanie","expected":{"artist":"Melanie","title":"Golden Hour Of Melanie"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"neil-young-after-the-gold-rush","expected":{"artist":"Neil Young","title":"After The Gold Rush"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"steve-reich-sextet-six-marimbas","expected":{"artist":"Steve Reich","title":"Sextet / Six Marimbas"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"gregory-isaacs-lovers-rock","expected":{"artist":"Gregory Isaacs","title":"Lovers' Rock"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"curtis-mayfield-curtis-live","expected":{"artist":"Curtis Mayfield","title":"Curtis/Live!"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"j-dilla-donuts","expected":{"artist":"J Dilla","title":"Donuts"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"hugo-jara-estado-de-animo","expected":{"artist":"Hugo Jara","title":"Estado De Animo"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"dorival-caymmi-caymmi","expected":{"artist":"Dorival Caymmi","title":"Caymmi"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"dorival-caymmi-caymmi-odeon","expected":{"artist":"Dorival Caymmi","title":"Caymmi"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"stevie-wonder-hotter-than-july","expected":{"artist":"Stevie Wonder","title":"Hotter Than July"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"nite-jewel-no-sun","expected":{"artist":"Nite Jewel","title":"No Sun"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"horace-silver-and-the-jazz-messengers","expected":{"artist":"Horace Silver and the Jazz Messengers","title":"Horace Silver and the Jazz Messengers"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"max-romeo-revelation-time","expected":{"artist":"Max Romeo","title":"Revelation Time"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"various-beat-girls-espanol","expected":{"artist":"Various","title":"Beat Girls Español!"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"team-shadetek-pale-fire","expected":{"artist":"Team Shadetek","title":"Pale Fire"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"astrud-gilberto-compact-jazz","expected":{"artist":"Astrud Gilberto","title":"Compact Jazz"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"astrud-gilberto-beach-samba","expected":{"artist":"Astrud Gilberto","title":"Beach Samba"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"various-campeones-xvii-concurso-cancion-asturiana","expected":{"artist":"Various","title":"Campeones XVII Concurso de Canción Asturiana"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"paddy-mcaloon-i-trawl-the-megahertz","expected":{"artist":"Paddy McAloon","title":"I Trawl the Megahertz"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"maranata-maranata","expected":{"artist":"Maranata","title":"Maranata"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"antonio-carlos-jobim-tide","expected":{"artist":"Antonio Carlos Jobim","title":"Tide"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"refused-songs-to-fan-the-flames-of-discontent","expected":{"artist":"Refused","title":"Songs to Fan the Flames of Discontent"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"collard-roge-satie-4-handed-piano","expected":{"artist":"Jean-Philippe Collard & Pascal Rogé","title":"Satie: The 4 Handed Piano"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"oren-ambarchi-shebang","expected":{"artist":"Oren Ambarchi","title":"Shebang"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"laurent-garnier-planet-house-ep","expected":{"artist":"Laurent Garnier","title":"Planet House EP"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"various-trojan-reggae-party-volume-one","expected":{"artist":"Various","title":"Trojan Reggae Party Volume One"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"violeta-parra-un-rio-de-sangre","expected":{"artist":"Violeta Parra","title":"Un Rio de Sangre"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"bob-marley-and-the-wailers-uprising","expected":{"artist":"Bob Marley & The Wailers","title":"Uprising"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"various-macondo-revisitado","expected":{"artist":"Various","title":"Macondo Revisitado"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"barry-brown-vibes-of-barry-brown","expected":{"artist":"Barry Brown","title":"Vibes of Barry Brown"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"barry-brown-barry-brown","expected":{"artist":"Barry Brown","title":"Barry Brown"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"los-llopis-los-llopis","expected":{"artist":"Los Llopis","title":"Los Llopis"},"actual":{"artist":"Los Llopis","title":"Estremécete"},"scores":{"artistExact":1,"titleExact":0,"artistFuzzy":1,"titleFuzzy":0}},{"id":"jorge-negrete-jorge-negrete","expected":{"artist":"Jorge Negrete","title":"Jorge Negrete"},"actual":{"artist":null,"title":null},"scores":{"artistExact":0,"titleExact":0,"artistFuzzy":0,"titleFuzzy":0}},{"id":"baden-powell-estudos","expected":{"artist":"Baden Powell","title":"Estudos"},"actual":{"artist":"Baden Powell","title":"Estudos"},"scores":{"artistExact":1,"titleExact":1,"artistFuzzy":1,"titleFuzzy":1}},{"id":"tipico-santa-rosa-tipico-santa-rosa","expected":{"artist":"Tipico Santa Rosa","title":"Tipico Santa Rosa"},"actual":{"artist":"Tipico Santa Rosa","title":null},"scores":{"artistExact":1,"titleExact":0,"artistFuzzy":1,"titleFuzzy":0}}]}}};
var models = DATA.models;

// ─── Capture original scores before any mutation ───
var ORIG_SCORES = {};
for (var _m = 0; _m < models.length; _m++) {
  var _model = models[_m];
  ORIG_SCORES[_model] = DATA.results[_model].details.map(function(d) {
    return { artistExact: d.scores.artistExact, titleExact: d.scores.titleExact, artistFuzzy: d.scores.artistFuzzy, titleFuzzy: d.scores.titleFuzzy };
  });
}

// ─── Corrections (persisted in localStorage) ───
var STORAGE_KEY = 'eval-corrections-' + DATA.timestamp;
var corrections = {};
try { corrections = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}'); } catch(e) {}

// Apply any saved corrections before first render
for (var _key in corrections) {
  var _parts = _key.split('_');
  var _mi = parseInt(_parts[0], 10), _ci = parseInt(_parts[1], 10);
  if (models[_mi] && DATA.results[models[_mi]].details[_ci]) {
    DATA.results[models[_mi]].details[_ci].scores = { artistExact: 1, titleExact: 1, artistFuzzy: 1, titleFuzzy: 1 };
  }
}
for (var _mii = 0; _mii < models.length; _mii++) recalcSummary(_mii);

// ─── Helpers ───
function modelColor(i) { return PALETTE[i % PALETTE.length]; }
function pct(v) { return (v * 100).toFixed(1) + '%'; }
function scoreClass(v) {
  return v >= 0.8 ? 's-perfect' : v >= 0.5 ? 's-good' : v > 0 ? 's-poor' : 's-zero';
}
function shortName(m) { return m.replace('mistral-', ''); }
function esc(s) {
  if (s == null) return '';
  return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
}
function isPerfect(scores) {
  return scores.artistExact === 1 && scores.titleExact === 1 && scores.artistFuzzy === 1 && scores.titleFuzzy === 1;
}

function recalcSummary(mi) {
  var m = models[mi];
  var details = DATA.results[m].details;
  var n = details.length;
  var ae = 0, te = 0, af = 0, tf = 0;
  for (var i = 0; i < n; i++) {
    ae += details[i].scores.artistExact;
    te += details[i].scores.titleExact;
    af += details[i].scores.artistFuzzy;
    tf += details[i].scores.titleFuzzy;
  }
  ae /= n; te /= n; af /= n; tf /= n;
  DATA.results[m].summary = { artistExact: ae, titleExact: te, artistFuzzy: af, titleFuzzy: tf, overall: (ae + te + af + tf) / 4 };
}

// ─── Mark / Undo ───
function markCorrect(mi, ci) {
  var key = mi + '_' + ci;
  corrections[key] = true;
  DATA.results[models[mi]].details[ci].scores = { artistExact: 1, titleExact: 1, artistFuzzy: 1, titleFuzzy: 1 };
  recalcSummary(mi);
  localStorage.setItem(STORAGE_KEY, JSON.stringify(corrections));
  renderPills(mi, ci);
  renderMarkBtn(mi, ci);
  updateSummaryCard(mi);
  updateSaveBtn();
}

function undoCorrect(mi, ci) {
  var key = mi + '_' + ci;
  delete corrections[key];
  var orig = ORIG_SCORES[models[mi]][ci];
  DATA.results[models[mi]].details[ci].scores = { artistExact: orig.artistExact, titleExact: orig.titleExact, artistFuzzy: orig.artistFuzzy, titleFuzzy: orig.titleFuzzy };
  recalcSummary(mi);
  localStorage.setItem(STORAGE_KEY, JSON.stringify(corrections));
  renderPills(mi, ci);
  renderMarkBtn(mi, ci);
  updateSummaryCard(mi);
  updateSaveBtn();
}

// ─── DOM Update Helpers ───
function renderPills(mi, ci) {
  var el = document.getElementById('pills-' + mi + '-' + ci);
  if (!el) return;
  var s = DATA.results[models[mi]].details[ci].scores;
  el.innerHTML =
    '<span class="pill exact ' + scoreClass(s.artistExact) + '" title="Artist exact">A:' + (s.artistExact ? '&#10003;' : '&#10007;') + '</span>' +
    '<span class="pill exact ' + scoreClass(s.titleExact) + '" title="Title exact">T:' + (s.titleExact ? '&#10003;' : '&#10007;') + '</span>' +
    '<span class="pill ' + scoreClass(s.artistFuzzy) + '" title="Artist fuzzy: ' + pct(s.artistFuzzy) + '">' + pct(s.artistFuzzy) + '</span>' +
    '<span class="pill ' + scoreClass(s.titleFuzzy) + '" title="Title fuzzy: ' + pct(s.titleFuzzy) + '">' + pct(s.titleFuzzy) + '</span>';
}

function renderMarkBtn(mi, ci) {
  var el = document.getElementById('markwrap-' + mi + '-' + ci);
  if (!el) return;
  var key = mi + '_' + ci;
  var isCorrected = !!corrections[key];
  var origPerfect = isPerfect(ORIG_SCORES[models[mi]][ci]);
  if (origPerfect && !isCorrected) { el.innerHTML = ''; return; }
  if (isCorrected) {
    el.innerHTML = '<button class="mark-btn corrected" onclick="undoCorrect(' + mi + ',' + ci + ')">' +
      '&#10003; corrected <span class="undo-hint">&#8629; undo</span></button>';
  } else {
    el.innerHTML = '<button class="mark-btn" onclick="markCorrect(' + mi + ',' + ci + ')">Mark &#10003;</button>';
  }
}

function updateSummaryCard(mi) {
  var s = DATA.results[models[mi]].summary;
  var keys = ['ae', 'te', 'af', 'tf'];
  var vals = [s.artistExact, s.titleExact, s.artistFuzzy, s.titleFuzzy];

  var overallEl = document.getElementById('overall-' + mi);
  if (overallEl) overallEl.textContent = pct(s.overall);

  for (var i = 0; i < 4; i++) {
    var ve = document.getElementById('val-' + keys[i] + '-' + mi);
    var be = document.getElementById('bar-' + keys[i] + '-' + mi);
    if (ve) ve.textContent = pct(vals[i]);
    if (be) be.style.width = (vals[i] * 100) + '%';
  }

  // Update winner badges across all cards
  var best = -Infinity;
  for (var mii = 0; mii < models.length; mii++) {
    if (DATA.results[models[mii]].summary.overall > best) best = DATA.results[models[mii]].summary.overall;
  }
  for (var mji = 0; mji < models.length; mji++) {
    var badge = document.getElementById('badge-' + mji);
    if (badge) badge.style.display = DATA.results[models[mji]].summary.overall === best ? '' : 'none';
  }
}

function updateSaveBtn() {
  var btn = document.getElementById('save-btn');
  if (!btn) return;
  var count = Object.keys(corrections).length;
  btn.textContent = count ? 'Save JSON (' + count + ')' : 'Save JSON';
  btn.className = count ? 'save-btn has-changes' : 'save-btn';
}

// ─── Save JSON ───
async function saveJson() {
  var btn = document.getElementById('save-btn');
  var json = JSON.stringify(DATA, null, 2);
  var blob = new Blob([json], { type: 'application/json' });
  var filename = DATA.timestamp.replace(/[:.]/g, '-') + '.json';

  function setLabel(label) { if (btn) btn.textContent = label; }
  function restoreLabel() { updateSaveBtn(); }

  if (window.showSaveFilePicker) {
    try {
      var handle = await window.showSaveFilePicker({
        suggestedName: filename,
        types: [{ description: 'JSON file', accept: { 'application/json': ['.json'] } }]
      });
      var writable = await handle.createWritable();
      await writable.write(blob);
      await writable.close();
      setLabel('Saved &#10003;');
      setTimeout(restoreLabel, 2000);
    } catch(e) {
      if (e.name !== 'AbortError') {
        triggerDownload(blob, filename);
        setLabel('Downloaded &#10003;');
        setTimeout(restoreLabel, 2000);
      }
    }
  } else {
    triggerDownload(blob, filename);
    setLabel('Downloaded &#10003;');
    setTimeout(restoreLabel, 2000);
  }
}

function triggerDownload(blob, filename) {
  var a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(a.href);
}

// ─── Summary Cards ───
var summaryEl = document.getElementById('summary');
var _bestOverall = -Infinity;
for (var _bmi = 0; _bmi < models.length; _bmi++) {
  if (DATA.results[models[_bmi]].summary.overall > _bestOverall) _bestOverall = DATA.results[models[_bmi]].summary.overall;
}

models.forEach(function(m, i) {
  var s = DATA.results[m].summary;
  var color = modelColor(i);
  var isBest = s.overall === _bestOverall;
  var card = document.createElement('div');
  card.className = 'model-card';
  card.style.animationDelay = (0.05 + i * 0.07) + 's';
  card.innerHTML =
    '<div class="model-card-accent" style="background:' + color + '"></div>' +
    '<div class="model-name" style="color:' + color + '">' + esc(shortName(m)) +
      '<span class="winner-badge" id="badge-' + i + '" style="display:' + (isBest ? '' : 'none') + '">best</span>' +
    '</div>' +
    '<div class="overall-label">Overall</div>' +
    '<div class="overall-score" id="overall-' + i + '">' + pct(s.overall) + '</div>' +
    statRow('Artist exact', 'ae', i, s.artistExact, color) +
    statRow('Title exact',  'te', i, s.titleExact,  color) +
    statRow('Artist fuzzy', 'af', i, s.artistFuzzy, color) +
    statRow('Title fuzzy',  'tf', i, s.titleFuzzy,  color);
  summaryEl.appendChild(card);
});

function statRow(label, key, mi, val, color) {
  return '<div class="stat-row">' +
    '<span class="stat-label">' + label + '</span>' +
    '<div class="bar-track"><div class="bar-fill" id="bar-' + key + '-' + mi + '" style="background:' + color + ';width:' + (val * 100) + '%"></div></div>' +
    '<span class="stat-value" id="val-' + key + '-' + mi + '">' + pct(val) + '</span>' +
    '</div>';
}

// Initialize save button state
updateSaveBtn();

// ─── Detail Table ───
var table = document.getElementById('detail-table');

var modelHeaders = models.map(function(m, i) {
  return '<th class="group-header" style="color:' + modelColor(i) + '">' + esc(shortName(m)) + '</th>';
}).join('');

table.innerHTML =
  '<thead><tr>' +
  '<th style="width:140px">#</th>' +
  '<th style="width:200px">Expected</th>' +
  modelHeaders +
  '</tr></thead><tbody></tbody>';

var tbody = table.querySelector('tbody');
var cases = DATA.results[models[0]].details;

cases.forEach(function(c, ci) {
  var row = document.createElement('tr');
  var modelCells = '';

  models.forEach(function(m, mi) {
    var d = DATA.results[m].details[ci];
    var s = d.scores;
    var key = mi + '_' + ci;
    var isCorrected = !!corrections[key];
    var origPerfect = isPerfect(ORIG_SCORES[m][ci]);

    var artistVal = d.actual.artist === null
      ? '<span class="field-value null-val">null</span>'
      : '<span class="field-value">' + esc(d.actual.artist) + '</span>';
    var titleVal = d.actual.title === null
      ? '<span class="field-value null-val">null</span>'
      : '<span class="field-value">' + esc(d.actual.title) + '</span>';

    var markBtnHtml = '';
    if (!origPerfect || isCorrected) {
      markBtnHtml = isCorrected
        ? '<button class="mark-btn corrected" onclick="undoCorrect(' + mi + ',' + ci + ')">&#10003; corrected <span class="undo-hint">&#8629; undo</span></button>'
        : '<button class="mark-btn" onclick="markCorrect(' + mi + ',' + ci + ')">Mark &#10003;</button>';
    }

    modelCells +=
      '<td class="model-col">' +
        '<div class="model-result">' +
          '<div class="artist"><span class="field-label">A</span>' + artistVal + '</div>' +
          '<div class="title"><span class="field-label">T</span>' + titleVal + '</div>' +
          '<div class="score-pills" id="pills-' + mi + '-' + ci + '">' +
            '<span class="pill exact ' + scoreClass(s.artistExact) + '" title="Artist exact">A:' + (s.artistExact ? '&#10003;' : '&#10007;') + '</span>' +
            '<span class="pill exact ' + scoreClass(s.titleExact) + '" title="Title exact">T:' + (s.titleExact ? '&#10003;' : '&#10007;') + '</span>' +
            '<span class="pill ' + scoreClass(s.artistFuzzy) + '" title="Artist fuzzy: ' + pct(s.artistFuzzy) + '">' + pct(s.artistFuzzy) + '</span>' +
            '<span class="pill ' + scoreClass(s.titleFuzzy) + '" title="Title fuzzy: ' + pct(s.titleFuzzy) + '">' + pct(s.titleFuzzy) + '</span>' +
          '</div>' +
          '<div class="mark-wrap" id="markwrap-' + mi + '-' + ci + '">' + markBtnHtml + '</div>' +
        '</div>' +
      '</td>';
  });

  row.innerHTML =
    '<td class="col-id">' + (ci + 1) + '. ' + esc(c.id) + '</td>' +
    '<td class="col-expected">' +
      '<div class="artist">' + esc(c.expected.artist) + '</div>' +
      '<div class="title">' + esc(c.expected.title) + '</div>' +
    '</td>' +
    modelCells;

  tbody.appendChild(row);
});
</script>
</body>
</html>